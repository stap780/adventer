<tr class="nested-fields align-middle">
  <td width="60px" height="50px">
    <% image = f.object.product.present? && f.object.product.images.present? ? f.object.product.images.first : ''%>
    <%= image_tag image, class: "mx-auto d-block" %>
  </td>

  <td class="" style="width:30%;">
    <%# f.association :product, label: false, collection: Product.all.map { |product| ["("+product.sku+") "+product.title, product.id, {data: {sku: product.sku}}] } %>
	<%= f.input :product_title, as: :autocomplete, label: false, url: autocomplete_product_title_order_kps_path , input_html: {onkeyup: "getId(this.id)", onclick:"productAutocomplete(this.id)"} %>
  <%= f.input :product_id, as: :hidden %>
</td>
<td>
  <% pr_sku = f.object.product.present? ? f.object.product.sku : '' %>
  <% sku = f.object.sku.present? ? f.object.sku : pr_sku %>
  <%= f.input :sku , label: false, input_html: { value: sku } %>
</td>
  <td>
    <% pr_desc = f.object.product.present? ? f.object.product.desc : '' %>
    <% value = f.object.desc.present? ? f.object.desc : pr_desc %>
    <%= f.input :desc, as: :text, label: false , input_html: { value: value, rows: "1" } %>
  </td>
  <td style="width:110px;"><%= f.input :quantity, as: :integer, label: false, input_html: {min: "0" , onchange: "calculate(this.value)"} %></td>
  <td style="width:155px;"><%= f.input :price, as: :decimal, label: false, input_html: {min: "0", onchange: "calculate()", step: "0.01"}%></td>
  <td style="width:155px;"><%= f.input :sum, as: :decimal, label: false, input_html: {min: "0", onchange: "calculate()", step: "0.01"} %></td>
  <%# f.association :kp %>
  <td><%= link_to_remove_association '<span class="oi oi-trash"></span>'.html_safe, f %></td>
</tr>
